INFO:scripts.vector_db:Initializing ChromaDB at ./vectordb
ERROR:chromadb.telemetry.product.posthog:Failed to send telemetry event ClientStartEvent: capture() takes 1 positional argument but 3 were given
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:scripts.vector_db:Loaded existing collection: educational_content
INFO:scripts.vector_db:Adding 1 chunks to database in batches of 100

======================================================================
EDUCATION RAG SYSTEM - INSTALLATION TEST
======================================================================

======================================================================
TEST 1: Checking Package Imports
======================================================================
✅ ChromaDB - OK
✅ Anthropic API - OK
✅ PDF Parser - OK
✅ Sentence Transformers - OK
✅ FastAPI - OK
✅ LangChain - OK
✅ Pandas - OK
✅ NumPy - OK

======================================================================
TEST 2: Checking Configuration
======================================================================
✅ Configuration loaded
   - Vector DB Path: ./vectordb
   - Uploads Path: ./uploads
   - Outputs Path: ./outputs
   - Embedding Model: all-MiniLM-L6-v2
   - Claude Model: claude-sonnet-4-20250514
✅ Anthropic API key is set

======================================================================
TEST 3: Testing Vector Database
======================================================================
✅ Vector database initialized
Batches:   0%|          | 0/1 [00:00<?, ?it/s]Batches: 100%|██████████| 1/1 [00:00<00:00, 40.16it/s]
WARNING:chromadb.segment.impl.vector.local_persistent_hnsw:Add of existing embedding ID: chunk_0
WARNING:chromadb.segment.impl.vector.local_persistent_hnsw:Add of existing embedding ID: chunk_0
WARNING:chromadb.segment.impl.vector.local_persistent_hnsw:Add of existing embedding ID: chunk_0
WARNING:chromadb.segment.impl.vector.local_persistent_hnsw:Add of existing embedding ID: chunk_0
WARNING:chromadb.segment.impl.vector.local_persistent_hnsw:Add of existing embedding ID: chunk_0
WARNING:chromadb.segment.impl.vector.local_persistent_hnsw:Add of existing embedding ID: chunk_0
WARNING:chromadb.segment.impl.metadata.sqlite:Insert of existing embedding ID: chunk_0
ERROR:chromadb.telemetry.product.posthog:Failed to send telemetry event CollectionAddEvent: capture() takes 1 positional argument but 3 were given
INFO:scripts.vector_db:Successfully added 1 chunks to database
✅ Successfully added test chunk
Batches:   0%|          | 0/1 [00:00<?, ?it/s]Batches: 100%|██████████| 1/1 [00:00<00:00, 284.90it/s]
ERROR:chromadb.telemetry.product.posthog:Failed to send telemetry event CollectionQueryEvent: capture() takes 1 positional argument but 3 were given
INFO:scripts.vector_db:Search returned 1 results
ERROR:chromadb.telemetry.product.posthog:Failed to send telemetry event CollectionGetEvent: capture() takes 1 positional argument but 3 were given
Traceback (most recent call last):
  File "C:\Users\mahip\Downloads\education-rag-system-complete\education-rag-system\scripts\test_system.py", line 156, in test_content_generator
    generator = ContentGenerator()
                ^^^^^^^^^^^^^^^^^^
  File "C:\Users\mahip\Downloads\education-rag-system-complete\education-rag-system\scripts\content_generator.py", line 22, in __init__
    self.client = anthropic.Anthropic(api_key=settings.anthropic_api_key)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\mahip\Downloads\education-rag-system-complete\education-rag-system\venv\Lib\site-packages\anthropic\_client.py", line 119, in __init__
    super().__init__(
  File "C:\Users\mahip\Downloads\education-rag-system-complete\education-rag-system\venv\Lib\site-packages\anthropic\_base_client.py", line 796, in __init__
    self._client = http_client or SyncHttpxClientWrapper(
                                  ^^^^^^^^^^^^^^^^^^^^^^^
TypeError: Client.__init__() got an unexpected keyword argument 'proxies'
Traceback (most recent call last):
  File "C:\Users\mahip\Downloads\education-rag-system-complete\education-rag-system\scripts\test_system.py", line 176, in test_api_server
    import api_server
  File "C:\Users\mahip\Downloads\education-rag-system-complete\education-rag-system\api_server.py", line 48, in <module>
    generator = ContentGenerator()
                ^^^^^^^^^^^^^^^^^^
  File "C:\Users\mahip\Downloads\education-rag-system-complete\education-rag-system\scripts\content_generator.py", line 22, in __init__
    self.client = anthropic.Anthropic(api_key=settings.anthropic_api_key)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\mahip\Downloads\education-rag-system-complete\education-rag-system\venv\Lib\site-packages\anthropic\_client.py", line 119, in __init__
    super().__init__(
  File "C:\Users\mahip\Downloads\education-rag-system-complete\education-rag-system\venv\Lib\site-packages\anthropic\_base_client.py", line 796, in __init__
    self._client = http_client or SyncHttpxClientWrapper(
                                  ^^^^^^^^^^^^^^^^^^^^^^^
TypeError: Client.__init__() got an unexpected keyword argument 'proxies'
✅ Successfully searched database
✅ Database stats: 1 total chunks

======================================================================
TEST 4: Testing PDF Parser
======================================================================
✅ PDF parser initialized
✅ Content classification works: 'definition'

======================================================================
TEST 5: Testing Content Generator
======================================================================
❌ Content generator test failed: Client.__init__() got an unexpected keyword argument 'proxies'

======================================================================
TEST 6: Testing API Server
======================================================================
❌ API server test failed: Client.__init__() got an unexpected keyword argument 'proxies'

======================================================================
TEST SUMMARY
======================================================================
✅ PASSED - Package Imports
✅ PASSED - Configuration
✅ PASSED - Vector Database
✅ PASSED - PDF Parser
❌ FAILED - Content Generator
❌ FAILED - API Server

Total: 4/6 tests passed

⚠️  Some tests failed. Please check the errors above.
Common issues:
- Missing packages: pip install -r requirements.txt
- Missing .env file: cp .env.example .env and set ANTHROPIC_API_KEY
======================================================================
